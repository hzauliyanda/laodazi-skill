# Markdown文章智能标注器

智能分析markdown文章内容，自动为重点段落添加颜色标注和加粗，标注比例约5-8%。

## 核心功能

- 🎯 智能识别文章重点段落
- 🎨 重点段落红色标注 + 加粗
- 📏 统一字体大小 17px、字间距1px、行高1.8倍
- 📊 标注比例控制在5-8%左右（保守标注，非常克制）
- 💾 自动备份原文件，在原文件上进行标注
- ⚠️ **只添加样式，不修改原文内容**

## 使用方法

### 标注单个文件

```
/markup 文章路径.md
```

执行流程：
1. 自动备份原文件为 `原文件名.md.bak`
2. 在原文件上直接进行标注

**示例：**

```bash
/markup /Users/xxx/article.md
# 1. 备份：/Users/xxx/article.md.bak
# 2. 标注：直接修改 /Users/xxx/article.md
```

### 查看标注文件

```bash
# 查看标注后的文件
cat /Users/xxx/article.md

# 如需恢复原文件
cp /Users/xxx/article.md.bak /Users/xxx/article.md
```

## 标注规则

### 核心原则

**⚠️ 重要：只添加样式标签，不修改原文任何内容**

- ✅ 只在原文外层包裹 `<font>` 标签
- ❌ 不修改原文的文字内容
- ❌ 不修改原文的标点符号
- ❌ 不改变原文的段落结构
- ❌ 不删除或添加任何内容

**🔤 标点符号规范（严格遵守）：**

- ✅ 全部使用中文全角标点符号
- ✅ 引号必须使用 `"`（左引号）和 `"`（右引号）
- ❌ 禁止使用英文半角引号 `"`

**标点示例：**
- ✅ 正确：标注结果为"中文内容"
- ❌ 错误：标注结果为"中文内容"

---

### 1. 全文基础样式

**所有文本内容都需要添加样式标签**

**不需要添加样式的元素：**
- 标题（`#` 开头）
- 引用（`>` 开头）
- 图片（`![]()` 开头）
- 代码块（``` 开头）
- 列表（`-` 或 `*` 开头）
- HTML注释（`<!-- -->`）

**需要添加样式的元素：**
- 所有普通文本段落

**普通段落格式：**

```html
<font style="font-size:17px;letter-spacing:1px;line-height:1.8;">原文内容完全保持不变</font>
```

**标题和引用保持原样：**
```markdown
# 标题保持原样
> 引用保持原样
![](图片保持原样)
```

---

### 2. 重点段落标注（红色 #DF2A3F + 加粗）

**标注整个段落**（不是单个句子）

**标注对象：**
- 文章的核心论点段落
- 颠覆认知的观点段落
- 最重要的结论段落
- 引发思考的问题段落
- 关键历史细节和残酷场景描写
- 情感渲染和氛围营造段落

**识别特征：**
- 包含"不是...而是..."句式的段落
- 包含"本质"、"核心"、"关键"等词的段落
- 包含疑问词："为什么"、"如何"、"难道"的段落
- 包含问号"？"
- 段落中心句和结论性语句
- 包含情感渲染词汇（血腥、惨烈、地狱、屠杀等）的段落

**标注格式：**

```html
**<font style="color:#DF2A3F;font-size:17px;letter-spacing:1px;line-height:1.8;">原文内容完全保持不变</font>**
```

**⚠️ 重要说明：**
- 加粗标记 `**` 放在 `<font>` 标签**外部**
- 只在外层包裹 `<font>` 标签，**不修改原文任何内容**
- 原文的标点符号、文字、结构完全保持不变
- **严格遵守中文全角标点规范，引号使用 `"` 和 `"`**

**示例：**

原文段落：
```
这是一段被黄沙掩埋的血腥往事。
```

标注后：
```html
**<font style="color:#DF2A3F;font-size:17px;letter-spacing:1px;line-height:1.8;">这是一段被黄沙掩埋的血腥往事。</font>**
```

---

## 标注策略

**标注比例：约5-8%**

非常克制的标注策略，只标注最核心的段落：

- 重点段落：红色+加粗（每12-20个段落标注1个）
- 普通段落：黑色正常（添加样式标签）

**标注原则：**

1. 只添加 `<font>` 样式标签，不修改原文内容
2. 标注整个段落，不标注单个句子
3. 只标注最核心的论点、结论、情感渲染段落
4. 避免连续标注
5. 标注总量控制在全文段落的5-8%左右
6. 所有颜色标注统一使用红色 #DF2A3F
7. 加粗标记 `**` 放在 `<font>` 标签**外部**
8. 使用 `font-size:17px;letter-spacing:1px;line-height:1.8` 统一设置样式
9. **标题、引用、图片不添加font标签**（`#`标题、`>`引用、`![]()`图片保持原样）

---

## 完整示例

### 原文（article.md）

```markdown
文｜老达子

> 本文共2523字，阅读时长大约6分钟
>

# 前言
这是一段被黄沙掩埋的血腥往事。

同治十二年（1873年），陕甘战场的硝烟即将散尽。
```

### 标注后（article.md - 原文件被直接修改）

注意：原文件已自动备份为 `article.md.bak`

```markdown
<font style="font-size:17px;letter-spacing:1px;line-height:1.8;">文｜老达子</font>

> 本文共2523字，阅读时长大约6分钟
>

# 前言
**<font style="color:#DF2A3F;font-size:17px;letter-spacing:1px;line-height:1.8;">这是一段被黄沙掩埋的血腥往事。</font>**

<font style="font-size:17px;letter-spacing:1px;line-height:1.8;">同治十二年（1873年），陕甘战场的硝烟即将散尽。</font>
```

**说明：**
- 标题（`# 前言`）、引用（`>`）保持原样
- 只在原文外层包裹 `<font>` 标签
- 原文内容、标点符号完全不变

---

## 工作流程

1. **备份原文件**：自动将原文件备份为 `原文件名.md.bak`
2. **读取文件**：读取用户指定的md文件
3. **分析内容**：智能识别重点段落（核心观点、关键问题、情感渲染）
4. **应用标注**：
   - 只添加 `<font>` 样式标签
   - 按照5-8%的比例，为识别出的重点段落添加红色+加粗
   - **不修改原文任何内容**
5. **保存结果**：直接覆盖原文件（备份已创建，可随时恢复）

---

## 注意事项

1. **自动备份**：原文件会自动备份为 `.md.bak`，可随时恢复
2. **直接覆盖**：标注结果直接覆盖原文件
3. **只添加样式**：只添加 `<font>` 标签，不修改原文内容
4. **保留原格式**：标注不会破坏原有的markdown格式
5. **标注非常克制**：默认只标注约5-8%的段落
6. **颜色兼容**：使用HTML font标签，兼容微信公众号等平台
7. **标注整段**：标注整个段落，不是单个句子
8. **加粗格式**：加粗标记 `**` 放在 `<font>` 标签**外部**（如 `**<font>文本</font>**`）
9. **统一样式**：使用 `font-size:17px;letter-spacing:1px;line-height:1.8` 统一设置样式
10. **特殊元素不处理**：标题（`#`）、引用（`>`）、图片（`![]()`）、代码块（```）、列表（`-`）保持原样

---

## 与其他skill配合

```
# 步骤1：生成文章
/laodazi-history-writer [选题]

# 步骤2：智能标注（原文件会被备份并直接修改）
/laodazi-markup /path/to/article.md

# 步骤3：发布到公众号
/laodazi-post-to-wechat /path/to/article.md
```
